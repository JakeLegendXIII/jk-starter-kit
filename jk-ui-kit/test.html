<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
    </head>
    <body>
        <h1>Hello, World!</h1>

        <my-badge>New</my-badge>

        <my-button label="huzzah"><span>üëç</span>Click Me</my-button>
        <my-button disabled class="themed">Also Click</my-button>
        <my-button disabled class="themed2">Also Click</my-button>

        <style>
            my-badge {                
                padding: 5px;
                background-color: #007bff;
                color: white;
                border-radius: 4px;
            }      
            my-button.themed {
                --button-bg-color: purple;
                --button-color: yellow;
                --button-border-radius: 12px;
                --button-padding: 2rem;
            }      
            .themed2::part(control) {
                background-color: orange;
                color: black;
                border-radius: 0;
                padding: 0.5rem 3rem;
            }
        </style>

        <style>
            html body button {
                background-color: brown;
            }
        </style>

        <script>
            class MyButton extends HTMLElement {
                static observedAttributes = ['label', 'disabled'];
                // declare private
                #label = 'Blah';                
                #shadowRoot;
                #disabled = false;

                get label() {
                    return this.#label;
                }

                set label(value) {
                    this.#label = value;
                    this.render();
                }

                get disabled() {
                    return this.#disabled;
                }

                set disabled(value) {
                    this.#disabled = value;
                    this.render();
                }

                constructor() {
                    super();
                    this.#shadowRoot = this.attachShadow({ mode: 'open' }); 
                    this.render();
                }
                attributeChangedCallback(name, oldValue, newValue) {
                    if (name === 'label') {
                        this.label = newValue;                        
                    } else if (name === 'disabled') {
                        this.disabled = newValue !== null;
                    }
                }

                render() {
                    this.#shadowRoot.innerHTML = `
                        <style>
                            :host {
                                --button-border-radius: 4px;
                                --button-color: white;
                                --button-bg-color: darkgreen;
                                --button-padding: 1rem;
                             }
                             button {
                                 padding: var(--button-padding);
                                 background-color: var(--button-bg-color);
                                 color: var(--button-color);                
                                 border-radius: var(--button-border-radius);                    
                             }                
                        </style>      
                        <div>${this.label}</div>      
                        <button part='control' ${this.disabled ? 'disabled' : ''}>
                            <slot name="icon"></slot>
                            <slot></slot>
                        </button>
                    `;
                }
            }
            customElements.define('my-button', MyButton);

        </script>
    </body>
</html>